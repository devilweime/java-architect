# 代码设计原则

了解代码设计原则的含义，了解代码原则的具体实现，把握原则间的综合应用（适用场景）



## 单一职责原则

* 定义

  ```javascript
   一个类或一个接口，最好负责一项职责
  ```

* 具体

  ```javascript
  loginController那么在此类中，就只写一些关于登录的相关代码，不要在这个类里又写和登录不相关的功能点，这样很便于代码的维护
  ```

* 违反单一职责原则

  ```javascript
  当遇到职责扩散的时候，在逻辑足够简单的时候，才可以在代码级别上面违反单一职责原则，只有类中方法数量足够少，才可以在方法级别上违反单一职责原则
  ```


## 里氏替换原则

* 定义

  ```javascript
  在使用基类的地方可以任意使用其子类，能保证子类完美替换基类，而且功能没有影响
  
  原则包含以下四层含义：
  * 子类可以实现父类的抽象(abstract)方法，但不能覆盖父类的非抽象方法； 
  * 子类可以增加自己特有的方法； 
  * 当子类的方法重载父类的方法时，方法的形参要比父类方法的输入参数更佳宽松； 
  * 当子类的方法实现父类的抽象方法时，方法的返回值要比父类更加严格；
  ```

* 具体

  ```javascript
  
  ```

* 违反里式替换原则

  ```javascript
  如果非要重写父类的方法，比较通用的方法是：原来的父类和子类都继承一个更加通俗的基类，原有的继承关系去掉，采用依赖、聚合、组合等关系代替；
  ```



## 依赖倒置原则

* 定义

  ```javascript
  高层模块不应该依赖低层模块，二者都应该依赖其抽象；抽象不应该依赖细节；细节应该依赖抽象，其核心思想是依赖于抽象
  ```

* 具体

  ```javascript
  问题由来：类A直接依赖类B，假如要将类A改为依赖类C，则必须通过修改类A的代码来完成；这种场景下，类A一般是高层模块，负责复杂的业务逻辑；类B和类C是低层模块，负责基本的原则操作；假如修改类A，会给程序带来不必要的风险。
  
  解决方案：将类A修改为依赖接口I，类B和类C各自实现接口I，类A通过接口I来间接与类B和类C发生联系，则会降低修改类A的几率；
  
  在实际中，我们一般需要做到以下三点： 
  * 低层模块尽量都要有抽象类或者接口，或者两者都有； 
  * 变量的声明类型尽量是抽象类或者接口； 
  * 使用继承时遵循里氏替换原则
  ```


## 接口隔离原则

* 定义

  ```javascript
  类间的依赖关系应该建立在最小的接口上 
  
  与单一职责比较：
  接口隔离原则感觉和单一职责原则很类似,都强调了物以类聚的概念。但其针对的对象与维度不一样，单一职责主要是针对于一个类的，强调了类的功能。而接口隔离原则有更细化的感觉。
  *单一职责原则：完整的功能；
  *接口隔离原则：更细小的功能
  ```



## 迪米特法则

* 定义

  ```javascript
  一个对象应该对其他对象保持最少的了解，其核心精神就是：不和陌生人说话，通俗之意就是一个对象对自己需要耦合关联调用的类应该知道的少；这会导致类之间的耦合度降低，每个类都尽量减少对其他类的依赖
  ```

* 具体

  ```
  比如SpringBoot就充分体现了这种原则，只暴露出几个类和方法，对于其实现的细节进行了很好的封装，这点又体现了开闭原则中的闭的特点。
  设计模式中的门面模式(Facade Pattern)也很好的体现了这一原则
  ```



## 合成复用原则

* 定义

  ```javascript
  要尽量使用合成和聚合，尽量不要使用继承
  *为什么要这样做？
  ```

* 具体

  ```javascript
  has—A，通过持有多个功能类的引用来实现其目标功能
  ```

* 优缺点

  ```javascript
  优点：
  
  缺点：
  **会有较多的对象需要管理
  ```


## 开闭原则

* 定义

  ```javascript
  一个软件实体如类、模版和函数应该对扩展，对修改关闭；
  ```

* 具体

  ```javascript
  总的来说，就是在代码设计上，要对功能的扩展提供可扩展的空间:
  *拓展功能可以通过新增实现类，而不是去修改原来功能的代码
  
  参考设计：
  *spring的AOP设计
  *责任链模式
  *SPI
  *IOC容器取出一个接口的所有实现类List<接口> serviceList
  *模板方法模式
  *访问者模式（也可以解决if-else）
  ```



## 总结

- 单一职责原则：实现类要职责单一；
- 里氏替换原则：不要破坏继承体系；
- 依赖倒置原则：面向接口编程；
- 接口隔离原则：设计接口的时候要精简单一；
- 迪米特法则：降低耦合；
- 合成复用原则：has-A模式，

**开闭原则：总纲，对扩展开放，对修改关闭；**



## 拓展

1. 在不同的环境中复用已有的设计和实现：

   * **合成/聚合复用**

   * **继承复用**


**参考文档**

[对JAVA代码设计六大原则的理解](https://blog.csdn.net/puhaiyang/article/details/78231498)
[代码设计 六大原则](https://blog.csdn.net/u010388497/article/details/51809152)





